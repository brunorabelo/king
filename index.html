<!DOCTYPE html>
<html>
<head>
<title>King (card game) by Bruno</title>
<link rel="stylesheet" href='style.css'></link>
<script src="https://unpkg.com/xstate@4/dist/xstate.js"></script>
</head>
<body>

<h1>King by Bruno</h1>
<button type='button' onclick='updateScreen()'>Update</button>
<br>
<br>
<div class="row">
  <div class="column" style="background-color:#aaa;">
    Jogador 1
    <div id="jogador1">
    </div>
  </div>
  <div class="column" style="background-color:#bbb;">Jogador 2
    <div id="jogador2">
    </div>
  </div>
  <div class="column" style="background-color:#ccc;">Jogador 3
    <div id="jogador3">
    </div>
  </div>
  <div class="column" style="background-color:#ddd;">Jogador 4
    <div id="jogador4">
    </div>
  </div>
</div>
<br>

<p id='turnCaption'>Jogo não iniciado</p>
<input  id="indexCard"></input>
<button type='button' onclick='play()'>Jogar</button>


<h2>Mesa</h2>
<div id="board">
</div>

<script src="app.js"></script>

<script>
let playersMap = ['jogador1', 'jogador2', 'jogador3', 'jogador4']
let jogoIniciado = false

function renderScreen(playerTurnName,boardPlayCards, playersWithHands){
  if (!jogoIniciado){
    return
  }
  updateCaption(playerTurnName)
  showList('board', boardPlayCards, 'Mesa:')
  for (let i=0; i<playersWithHands.length; i++){
    showList('jogador'+(i+1).toString(), playersWithHands[i].hand, 'Mão de ' + playersWithHands[i].name)
  }
}

function updateCaption (playerName) {
  let playerTurnCaption = document.getElementById('turnCaption')
  playerTurnCaption.innerText = 'Vez de ' + playerName
}

function start(){
  jogoIniciado = true
  startGame()
}

function showList(element, list, desc) {
    var html = '<p>'+desc+'</p>'
    html += '<ul>';
    for(var i=0; i<list.length; i++) {
        if (list[i]){
          html += '<li>id: ' + i+' - '+ list[i].suit + ' '+ list[i].rank + '</li>';
        }
    };
    html += '</ul>';
    document.getElementById(element).innerHTML = html
}

start()
function play(){
  let input = document.getElementById('indexCard').value
  const index = parseInt(input)
  playCard(index)
}

</script>

</body>
</html>
